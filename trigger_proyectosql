CREATE OR REPLACE TRIGGER horas_extra
AFTER INSERT ON PARTESTRABAJO
FOR EACH ROW 
DECLARE
v_horas_trabajadas NUMBER(2);
v_horas_llegada LINEA.HORA_LLEGADA%TYPE;
v_horas_salida LINEA.HORA_SALIDA%TYPE;
v_ids_linea LINEA.ID%TYPE;
V_ID_MAX  LINEA.ID%TYPE; 
BEGIN 
v_horas_trabajadas:=0;
v_horas_llegada:=0;
v_horas_salida:=0;
SELECT MIN(id) into v_ids_linea from linea;
SELECT MAX(ID) INTO V_ID_MAX FROM LINEA;
LOOP
SELECT hora_llegada INTO v_horas_llegada
FROM LINEA
WHERE ID=V_IDS_LINEA;
DBMS_OUTPUT.PUT_LINE (v_horas_llegada);
SELECT hora_salida INTO v_horas_salida
FROM LINEA
WHERE ID=V_IDS_LINEA;
DBMS_OUTPUT.PUT_LINE (v_horas_llegada);
V_IDS_LINEA:=V_IDS_LINEA+1;
V_HORAS_TRABAJADAS:=(V_HORAS_LLEGADA-V_HORAS_SALIDA)+V_HORAS_TRABAJADAS;
EXIT WHEN V_IDS_LINEA=V_ID_MAX;
END LOOP;
INSERT INTO HORASEXTRA VALUES(V_HORAS_TRABAJADAS); 
END;

ALTER TRIGGER horas_extra ENABLE;

